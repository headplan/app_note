# 分布式业务复用

当系统慢慢膨胀为一个大系统时 , 很多功能重复实现 , 会造成很多不必要的麻烦 .

例如 , 网站后台 , App后台 , 论坛 , 用户管理系统 ,都实现了用户登录功能 .

#### 巨无霸系统的危害

* 维护麻烦 - 如果每个模块都用不同的语言完成 , 每个模块的代码逻辑都需要去维护 . 
* 代码merge时候冲突 , 团队维护天坑
* 数据库资源链接耗尽

解决以上问题的方案是 , 把重复实现的模块独立部署为远程服务 .

#### 远程服务

上面的例子 , 可以把登录模块部署为远程服务 , 当这个登录服务发生变化时 , 只要接口的传入参数和返回值保持不变 , 就不会影响其他业务.

**远程服务的实现**

**REST**

REST 表现层状态转化 , 指的是一组架构约束条件和原则 , 满足这些约束条件和原则的应用程序或设计就是RESTful的.

一些概念 :

* 资源 - 网站上的图片 , 音频 , 视频 , 文档都是资源 , 通过URI唯一定位一个资源
* 表现层 - 资源是一种具体的实体信息 , 可以有多重表现形式 , 把他表现出来就是表现层 , 例如文档可以是json,txt等
* 状态转化 - 客户端和后台交互就涉及了资源状态的变化 , 但HTTP协议是无状态的 , 状态都在后台 .   
  所以 , 客户端需要通知服务端状态的变化 , 通过下面4种方式实现  
  GET , POST , PUT , DELETE  
  
  总结:  
  每个URI代表一种资源  
  客户端和后台是传递这种资源的某种表现层  
  客户端通过HTTP的4个动作对资源进行操作来实现 , 表现层状态转化

  REST的重要原则就是请求是无状态的 , 所以一个请求中必须包含理解请求的信息 .  
  无状态请求可以使用服务在均衡在集群中的一台应答 , 十分适合云计算的环境 .  
  App端可以缓存数据以改进性能

**RPC**

远程过程调用协议 , 通过网络从远程计算机程序上请求 , 而不需要了解底层网络技术的协议 .

