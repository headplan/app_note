# 接口设计要点

1. 根据对象设计API
   而不是根据页面设计API,后期页面改版会难以维护.
   例如微博开放的评论API,对象是评论comments,后面紧接着的对象的动作或状态,例如comments/destory等等

2. API的命名
   当维护的接口越来越多,合理的命名就显得重要的I  
   例如,对象名/操作名,一般这样命名即可

3. API的安全性  
   后面提到

4. API返回的数据  
   App客户端一般是Java和C这类的强类型语言,所以服务端返回的数据必须类型固定.  
   空字符串就是空字符串,空数组就是空数组,不能有null这样的情况.  
   App客户端会用全局函数来处理所有API的返回数据,目的是,如果API的返回数据中缺少客户端需要的某个数据,会自动补上这个数据并赋予默认值.\(有效减少闪退情况\)  
   这一点可以在数据库设计时用默认值避免以下,避免null值的存在.一般使用null的情况会用在表示未填写状态时使用.  
   注:php中的数组和字段都是array表示.java中两者是不一样的

5. 图片的处理  
   客户端本地缓存图片,不存在则请求服务器API.  
   客户端通知服务端需要图片的尺寸,由服务端生成并缓存.  
   在图片后传入logo.png?w=80&h=80  
   现在的文件云存储服务,七牛等都提供这种服务加速功能.

6. 返回的提示信息  
   最科学的方式是:后台只返回信息代码,具体的文字提示由App客户端决定.  
   不过现在常常的做法是都由App后台返回:  
   返回提示码,返回给用户的文字,返回给客户端程序员的文字

7. 在线API测试文档  
   使用Swagger-UI创建测试文档

8. 在App客户端启动时,调用一个API获取必要的初始化信息  
   例如,版本后台App版本信息,提示更新等.

9. 关于API的版本升级问题  
   一般的API是这样的  
   test.com/v1/stat/destory -&gt; test.com/v2/stat/destory  
   注意:  
   v2版本的API的控制器必须继承v1的控制器,这样只重写需要改变的API即可  
   API测试文档中详细标明返回内容,方便客户端人员调试





