# 数据库的选择

**Redis , MongoDB , MySQL**

#### 读写数据

内存比硬盘快

* Redis - 数据存放在服务器内存, 内存满了需要扩容, 只能使用分布式方案 , 防止断电重启造成的内存数据丢失 , 可以安策略转移持久化数据到硬盘
* MongoDB - 同时使用了硬盘和内存 , 使用MMAP内存文件映射机制进行数据文件的读写 , 直接把文件映射到进程的内存空间中
* MySQL - 数据存放在硬盘中 , 也有缓存 , 但不是数据 , 而是查询结构的缓存.

#### 查找数据

* Redis - 键值对存储 , 查找数据直奔目标 , 速度快
* MongoDB和MySQL查找数据 , 根绝id或索引查找 , 或者有不存在id或索引的情况 , 就是逐个查找

#### 适用场景

Redis

* 速度快 , 价格高 , 成本高 . 键值对存储 , 所以必须知道键才能找对值 . 
* 读写频率高的都放在Redis中 , 一般作为MySQL或者MongoDB的缓存 , 两部分保持数据的一致性
* 例如API中附带了用户的身份信息 , 由于每次操作都需要验证用户的身份信息 , 所以这部分数据放在Redis中就非常合适.

MongoDB

* 实时数据 , 非常适合实时插入,更新或者读取的数据
* 大尺寸,低价值的数据 , 以前这些数据会存入文件中
* 高延伸性的场景 , 适用在服务器集群中
* 存储地理坐标数据 , MongoDB的地理坐标查询功能非常强大 , 例如查找某个矩形范围内的所有坐标 , LBS应用中非常常用

不适用的场景

* 高度事务性的系统 , 例如银行或者会计系统 . 例如涉及金钱操作 , 转账扣钱等 . 支持事务的数据库才行 , 因为必须确保一个账号扣钱 , 另一个账号转账成功 , 必须保证两个都完成才行 . 
* 传统的商业智能能用 , 特定的关系数据库
* 需要SQL的等复杂的操作 . MongoDB的查询还是没那么强大

MySQL

* 事务系统
* 复杂SQL的情况



