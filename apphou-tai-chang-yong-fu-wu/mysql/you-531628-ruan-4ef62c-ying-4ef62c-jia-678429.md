# MySQL优化

#### 软件优化

**\[ 正确使用MyISAM和InnoDB存储引擎 \]**

MyISAM和InnoDB , 两个最常用的存储引擎 . 在5.1版本中 , 默认的存储引擎为MyISAM , 到了5.5和5.6版本 , 默认的存储引擎是InnoDB

**MyISAM**

基于ISAM\(索引顺序访问方法\) , 支持全文索引 , 但并非是事务安全 , 不支持外键 , 使用表级锁 . 每个MyISAM文件有是那个文件 :

* FRM文件存放表结构
* MYD文件存放数据
* MYI存放索引

**InnoDB**

事务型存储引擎 , 支持行锁 , 但也并非绝对 , 例如执行一条更新语句时候没办法确定更新范围 , 也会锁表 .

InnoDB支持回滚 , 崩溃恢复 , ACID事务控制 .

InnoDB存储它的表和索引在一张表空间 , 表空间可以包含多个文件 .

**两者的区别**

* MyISAM支持表锁 , InnoDB支持行锁
* MyISAM是非事务安全型 , InnoDB是事务安全型
* MyISAM不支持外键 , InnoDB支持外键

**\[ 正确使用索引 \]**

什么是索引 ? 

书的目录就是一种索引 . 

**使用索引的一些原则 : **

* 给合适的列建立索引 . 例如给where子句中的指定列 , 或者连接子句中的指定的列 . 而不是select中的 . 
* 索引列的值尽可能不同 . 有唯一性的值 , 索引效果最好 , 大量重复值的索引效果很差 . 
* 使用短索引 . 对字符串类型的列建立所以 , 尽可能的指定前缀长度 , 例如有一个char\(50\)的列 , 前面20到30字符大部分都是唯一的 , 那么久不要对整个列进行索引 . 使得索引缓存中容纳更多 , 磁盘消耗IO更小 . 
* 利用最左前缀 . 



